<!doctype html>
<html style='height: 100%'>
	<head>
		<meta charset="utf-8">
		<title>sample</title>
		<link rel="stylesheet" href="http://docs.sencha.com/extjs/4.2.1/extjs-build/resources/ext-theme-neptune/ext-theme-neptune-all.css">
		<script src="http://docs.sencha.com/extjs/4.2.1/extjs/ext-all.js"></script>

		<script type="text/javascript"> 
			var QueryString = function () {
				// This function is anonymous, is executed immediately and 
				// the return value is assigned to QueryString!
				var query_string = {};
				var query = window.location.search.substring(1);
				var vars = query.split("&");
				for (var i=0;i<vars.length;i++) {
					var pair = vars[i].split("=");
							// If first entry with this name
					if (typeof query_string[pair[0]] === "undefined") {
						query_string[pair[0]] = pair[1];
							// If second entry with this name
					} else if (typeof query_string[pair[0]] === "string") {
						var arr = [ query_string[pair[0]], pair[1] ];
						query_string[pair[0]] = arr;
							// If third or later entry with this name
					} else {
						query_string[pair[0]].push(pair[1]);
					}
				} 
					return query_string;
			} ();

			Ext.Loader.setConfig({
					enabled:true, 
					disableCaching:false 
			}); 
			Ext.application({
					name : QueryString.appName || 'Mas',
					appFolder : QueryString.appFolder || '../app'
			});

			Ext.require([ 'Ext.form.*' ]);
		</script>
		
		<style type="text/css" media="screen">
		    #editor { 
		            height: 500px;
				    border: 1px solid #DDD;
				    border-radius: 4px;
				    border-bottom-right-radius: 0px;
				    margin-top: 5px;
		    }
		</style>
	</head>
	<body style='height: 100%'>
		<div id='impl'>
		</div>
		<div id='editor'>
		</div>
	</body>
	<script src="../lib/ace-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript"> 
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.open("GET", QueryString.name + '.js',false);
		xmlhttp.send();
		var code = xmlhttp.responseText;
		
		eval(code);
		
		var editorId = 'editor';
		
		var editor = ace.edit(editorId);
		editor.setTheme("ace/theme/monokai");
		editor.getSession().setMode("ace/mode/javascript");
		editor.setValue(code);
		
   </script>
</html>